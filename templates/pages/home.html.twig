 {# templates/pages/home.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
    <div class="bg-gray-950 min-h-screen flex items-center justify-center">
  <div class="bg-gray-900 w-full max-w-md rounded-2xl shadow-lg flex flex-col h-[500px]">
    <!-- Chat header -->
    <div class="p-4 border-b border-gray-800">
      <h1 class="text-white text-xl font-bold">AI Chat</h1>
    </div>

    <!-- Messages area -->
    <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-3">
      <div class="bg-gray-800 text-white p-2 rounded-lg self-start max-w-[80%]">
        Hello! I’m your AI assistant.
      </div>
    </div>

    <!-- Input area -->
    <div class="p-4 border-t border-gray-800">
      <div class="flex space-x-2">
        <input id="chatInput"
               type="text"
               placeholder="Type a message…"
               class="flex-1 p-2 rounded-lg bg-gray-800 text-white focus:outline-none" />
        <button id="sendBtn"
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
          Send
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  document.querySelector("#sendBtn").addEventListener("click", async function() {
    const input = document.querySelector("#chatInput");
    const message = input.value.trim();
    if (message) {
      let result = await fetch("{{path('api_chat')}}",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({message:message})
      })
      let data = await result.json() 
      console.log(data)
    }
  });
</script>

{% endblock %}
